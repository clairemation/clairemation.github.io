<!doctype HTML>

<html>
	<head>
	</head>

	<body>

		<canvas id="canvas" width=512 height=512></canvas>


		<script>
			var canvas = document.getElementById("canvas");
			var ctx = canvas.getContext("2d");
			ctx.font = "30px Arial";
			ctx.fillStyle = "black";
			ctx.textAlign = "center";
			var xPos = canvas.width / 2;
			var yPos = canvas.height / 2;


			function updateCanvas(num){
				ctx.clearRect(0, 0, 512, 512);
				ctx.fillText(num, xPos, yPos);
			}

			// var worker = new Worker("webworker.js");

			// worker.onmessage = function(evt){
			// 	updateCanvas(evt.data);
			// }

			// window.onbeforeunload = function(e){
			// 	worker.terminate();
			// }

			// worker.postMessage("start");

			var count = 0;
			var lastTime;
			var dt = 0;

			function tick(timestamp){
				requestAnimationFrame(tick);
				if (!lastTime){
					lastTime = timestamp;
				}
				dt += (timestamp - lastTime) / 1000;
				if (dt > 1){
					count = Math.floor(dt);
				}
				updateCanvas(Math.floor(count));
				lastTime = timestamp
			}

			requestAnimationFrame(tick);


		</script>
	
	</body>

	</html>